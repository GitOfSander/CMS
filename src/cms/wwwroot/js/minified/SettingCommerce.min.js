$(function(){$("#navigation #navCommerceSettings").addClass("active").parents("li").addClass("active").addClass("open").find(".sub-menu").slideDown();$.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="glyphicon glyphicon-ok"><\/i><\/button><button type="button" class="btn btn-alert editable-cancel"><i class="glyphicon glyphicon-remove"><\/i><\/button>';$.fn.editable.defaults.mode="inline";getSettings()});getSettings=function(){$.ajax({url:"/api/commerce-settings",dataType:"json",type:"get",contentType:"application/json;",success:function(n){return fillSettings(n),$("#main-wrapper").fadeIn(500),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})};fillSettings=function(n){$("#invoicePrefix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.invoicePrefix.id+'" class="editable editable-click" style="display: inline;">'+n.invoicePrefix.value+"<\/a>");$("#invoiceSuffix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.invoiceSuffix.id+'" class="editable editable-click" style="display: inline;">'+n.invoiceSuffix.value+"<\/a>");$("#invoiceCurrent td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.invoiceCurrent.id+'" class="editable editable-click" style="display: inline;">'+n.invoiceCurrent.value+"<\/a>");$("#creditPrefix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.creditPrefix.id+'" class="editable editable-click" style="display: inline;">'+n.creditPrefix.value+"<\/a>");$("#creditSuffix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.creditSuffix.id+'" class="editable editable-click" style="display: inline;">'+n.creditSuffix.value+"<\/a>");$("#orderPrefix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.orderPrefix.id+'" class="editable editable-click" style="display: inline;">'+n.orderPrefix.value+"<\/a>");$("#orderSuffix td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.orderSuffix.id+'" class="editable editable-click" style="display: inline;">'+n.orderSuffix.value+"<\/a>");$("#orderCurrent td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.orderCurrent.id+'" class="editable editable-click" style="display: inline;">'+n.orderCurrent.value+"<\/a>");$("#addressLine1 td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.addressLine1.id+'" class="editable editable-click" style="display: inline;">'+n.addressLine1.value+"<\/a>");$("#zipCode td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.zipCode.id+'" class="editable editable-click" style="display: inline;">'+n.zipCode.value+"<\/a>");$("#city td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.city.id+'" class="editable editable-click" style="display: inline;">'+n.city.value+"<\/a>");$("#country td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.country.id+'" class="editable editable-click" style="display: inline;">'+n.country.value+"<\/a>");$("#coc td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.coc.id+'" class="editable editable-click" style="display: inline;">'+n.coc.value+"<\/a>");$("#vat td:last-of-type").html('<a href="#" data-type="text" data-pk="'+n.vat.id+'" class="editable editable-click" style="display: inline;">'+n.vat.value+"<\/a>");initEditable()};initEditable=function(){$("a.editable").editable({inputclass:"form-control",url:function(n){return console.log(n),$.ajax({url:"/api/setting",dataType:"json",type:"post",data:{Id:n.pk,Value:n.value},success:function(n){toastr[n.value.messageType](n.value.message)},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else if(n.responseJSON){var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})},success:function(n){if(n.status==="error")return n.msg}})};