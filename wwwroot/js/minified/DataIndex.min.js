function generateList(n){n.data.length>1&&$("#saveOrder").removeClass("hidden");$.each(n.data,function(n,t){$("#cloneListObject").clone().prependTo("#dataItems");$("#dataItems").find("#cloneListObject").removeClass("hidden").data("id",t.Id).attr("id","d"+t.Id);$("#d"+t.Id).find("#dataItemTitle a").html(t.Title).attr("href",$("#d"+t.Id).find("#dataItemTitle a").attr("href")+t.Id)});$("#nestable").nestable({maxDepth:n.maxDepth,dragClass:"dd-dragel dd-pages",itemNodeName:"li.dd-item",handleClass:"dd3-handle"});$("#nestable li").on("mousedown touchstart",function(){$(this).attr("data-changed",!0)});return $("#main-wrapper").fadeIn(500),!0}function getObjects(n,t,i){var r=[];for(var u in n)n.hasOwnProperty(u)&&(typeof n[u]=="object"?r=r.concat(getObjects(n[u],t,i)):u===t&&n[t]===i&&r.push(n));return r}function getListItems(){jsonObj=[];var n=0;return $('#nestable li[data-changed="true"]').length!==0&&$("#nestable li").each(function(){item={};item.Id=$(this).data("id");item.CustomOrder=++n;jsonObj.push(item)}),jsonObj}$(document).ready(function(){$("#navigation #navData"+$("#id").val()).addClass("active").parents("li").addClass("active").addClass("open").find(".sub-menu").slideDown();var n={id:$("#id").val()};$.ajax({url:"/spine-api/data/items",dataType:"json",type:"get",data:n,contentType:"application/json;",success:function(n){var t=n.value;return $("#dataTitle").html(t.name),generateList(t),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}});$("#saveOrder").on("click",function(){var n=getListItems();n.length!==0&&$.ajax({url:"/spine-api/data/items/update",dataType:"json",type:"post",data:JSON.stringify(n),contentType:"application/json;",success:function(n){var t=n.value;return toastr[t.messageType](t.message),$.each($("#nestable li"),function(){$(this).attr("data-changed",!1)}),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})})});