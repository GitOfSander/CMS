function createList(n){$.each(n.data,function(n,t){$("#cloneRowObject").clone().appendTo("#resources");$("#resources").find("#cloneRowObject").removeClass("hidden").data("id",t.Id).attr("id","wr"+t.Id).data("type",t.Type.toLowerCase());$("#wr"+t.Id).find("#resourceDescription").append(t.Heading);var i;t.Type.toLowerCase()==="rgba"?(i=t.Text,$("#wr"+t.Id).find("#colorBox").css("background-color",t.Text).removeClass("hidden")):i=t.Type.toLowerCase()==="checkbox"||t.Type.toLowerCase()==="radio"?t.Text.toLowerCase()==="true"?"Yes":"No":t.Text;$("#wr"+t.Id).find("#resourceText #textBox").html(i)});$(".resourceRow").on("click",function(){id=$(this).data("id");type=$(this).data("type");var n={Id:id};$.ajax({url:"/spine-api/website/resource/get",dataType:"json",type:"get",contentType:"application/json;",data:n,success:function(n){var t=n.value;return fillModal(t),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})});return $("#main-wrapper").fadeIn(500),!0}function fillModal(n){if(resetFields(),type.toLowerCase()!=="rgba")if(type.toLowerCase()==="checkbox")$("#checkbox").removeClass("hidden"),$("#checkbox input").prop("checked",n.text);else if(type.toLowerCase()==="radio")$("#radio").removeClass("hidden"),$("#radio input").prop("checked",n.text);else if(type.toLowerCase()==="text")$("#input").val(n.text).removeClass("hidden");else if(type.toLowerCase()==="textarea")$("#textarea").val(n.text).removeClass("hidden");else if(type.toLowerCase()==="html5editor"){$("#html5Editor").removeClass("hidden");summernote=$("#html5Editor").summernote({height:200,toolbar:[["cleaner",["cleaner"]],["style",["style"]],["font",["bold","italic","underline","strikethrough","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["picture","link","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],cleaner:{notTime:2400,action:"both",newline:"<br>",notStyle:"position:absolute;top:0;left:0;right:0",icon:'<i class="note-icon">Verwijder opmaak<\/i>',keepHtml:!1,keepOnlyTags:["<p>","<br>","<ul>","<li>","<b>","<strong>","<i>","<a>"],keepClasses:!1,badTags:["style","script","applet","embed","noframes","noscript","html","div"],badAttributes:["style","start"]},popover:{image:[["custom",["imageAttributes"]],["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]]},lang:"nl-NL",imageAttributes:{imageDialogLayout:"default",icon:'<i class="note-icon-pencil"/>',removeEmpty:!1},displayFields:{imageBasic:!0,imageExtra:!1,linkBasic:!0,linkExtra:!1},callbacks:{onImageUpload:function(n){var t=new FormData;$.each(n,function(n,i){t.append(i.name,i)});$.ajax({url:"/api/image",type:"post",contentType:!1,processData:!1,data:t,success:function(n){return $.each(n,function(n,t){summernote.summernote("insertImage",t,function(){})}),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})}}});$(".modal").on("shown.bs.modal",function(){$("button.close").off().on("click",function(n){console.log("f");n.preventDefault();n.stopPropagation();$(this).closest(".modal").modal("hide")})});summernote.summernote("code",n.text)}$("#modalEdit").modal("show")}function resetFields(){$("#html5Editor").hasClass("hidden")||summernote.summernote("destroy");$("#radio input, #checkbox input, #input, #html5Editor, #textarea").addClass("hidden")}var summernote,type,id;$(document).ready(function(){document.execCommand("defaultParagraphSeparator",!1,"p");$("#navigation #navResources").addClass("active");$("button.close").on("click",function(n){console.log("f");n.preventDefault();n.stopPropagation();$(this).closest(".modal").modal("hide")});var n={WebsiteLanguageId:$("#websiteLanguageId").val()};$.ajax({url:"/spine-api/resources",dataType:"json",type:"get",data:n,contentType:"application/json;",success:function(n){var t=n.value;return createList(t),t.files||$("#websiteBtns").remove(),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}});$("#save").click(function(){var n="",t;switch(type){case"checkbox":n=$("#checkbox input").val();break;case"radio":n=$("#radio input").val();break;case"text":n=$("#input").val();break;case"textarea":n=$("#textarea").val();break;case"html5editor":n=$("#html5Editor").summernote("code")}t={Id:id,Text:n};$.ajax({url:"/spine-api/website/resource/update",dataType:"json",type:"post",contentType:"application/json;",data:JSON.stringify(t),success:function(t){var i=t.value;toastr[i.messageType](i.message);switch(type){case"rgba":$("#wr"+id).find("#colorBox").css("background-color",n).removeClass("hidden");break;case"checkbox":case"radio":n=n.toLowerCase()==="true"?"Yes":"No"}return $("#wr"+id).find("#resourceText #textBox").html(n),$("#modalEdit").modal("hide"),!0},error:function(n){if(n.status===401||n.status===403)toastr.warning("You are unauthorized to do this. You will be redirected to the login screen."),setTimeout(function(){location.href="/"},4500);else{var t=n.responseJSON.value;toastr[t.messageType](t.message)}return!0}})})});